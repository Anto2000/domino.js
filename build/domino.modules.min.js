/* domino.js - a JS fast dashboard prototyping framework - Version: 1.2 - Author:  Alexis Jacomy, Linkfluence - License: MIT */
(function(k,j){if(!k)throw Error("The namespace is not valid.");if(!j)throw Error("domino.js is required to initialize the modules.");k.Text=function(h,e){function c(d){f.html('<span class="property">'+a+'</span>: <span class="value">'+d.get(b.property)+"</span>")}j.module.call(this);var g=this,b=h||{};if(!b.property)throw Error("[Text] Property missing");var a=b.label||e.getLabel(b.property),f=b.element||$("<fieldset></fieldset>");b.cssClass&&f.addClass(b.cssClass);b.cssId&&f.attr("id",b.cssId);
b.triggers?j.utils.array(b.triggers).forEach(function(a){g.triggers.events[a]=c}):g.triggers.properties[b.property]=c;this.html=f};k.Button=function(h){j.module.call(this);var e=this,c=h||{},h=c.element||$("<"+(c.htmlTag||"button")+">"+(c.htmlContent||"")+"</"+(c.htmlTag||"button")+">");c.cssClass&&h.addClass(c.cssClass);c.cssId&&h.attr("id",c.cssId);h.click(function(){c.dispatch&&e.dispatchEvent(j.utils.array(c.dispatch))});this.html=h};k.Checkbox=function(h,e){function c(a){f.find("input").attr("checked",
a.get(b.property)?"checked":null)}j.module.call(this);var g=this,b=h||{};if(!b.property)throw Error("[Checkbox] Property missing");var a=b.dispatch||(1===e.getEvents(b.property).length?e.getEvents(b.property)[0]:null),f=b.element||$('<fieldset><input type="checkbox" id="'+(b.cssId||b.property)+'" /><label for="'+(b.cssId||b.property)+'">'+(b.label||e.getLabel(b.property))+"</label></fieldset>");b.cssId&&f.attr("id",b.cssId);f.find("input").change(function(){var d={};d[b.property]=$(this).is(":checked");
a&&g.dispatchEvent(a,d)});b.triggers?j.utils.array(b.triggers).forEach(function(a){g.triggers.events[a]=c}):g.triggers.properties[b.property]=c;this.html=f};k.SwitchButton=function(h,e){function c(a){(f=!!a.get(b.property))?(b.cssClassOn&&d.attr("class",b.cssClassOn),b.htmlOn&&d.html(b.htmlOn)):(b.cssClassOff&&d.attr("class",b.cssClassOff),b.htmlOff&&d.html(b.htmlOff))}j.module.call(this);var g=this,b=h||{};if(!b.property)throw Error("[SwitchButton] Property missing");var a=b.dispatch||(1===e.getEvents(b.property).length?
e.getEvents(b.property)[0]:null),f,d=b.element||$("<"+(b.htmlTag||"button")+"></"+(b.htmlTag||"button")+">");b.cssId&&d.attr("id",b.cssId);d.click(function(){if(b.property){var i={};i[b.property]=!f;a&&g.dispatchEvent(a,i)}});b.events?j.utils.array(b.events).forEach(function(a){g.triggers.events[a]=c}):g.triggers.properties[b.property]=c;this.html=d};k.TextInput=function(h,e){function c(){var i={};i[a.property]=d.find("input").val();f&&b.dispatchEvent(f,i)}function g(b){d.find("input").val(b.get(a.property))}
j.module.call(this);var b=this,a=h||{};if(!a.property)throw Error("[TextInput] Property missing");var f=a.dispatch||(1===e.getEvents(a.property).length?e.getEvents(a.property)[0]:null),d=a.element||$('<fieldset><label for="'+(a.cssId||a.property)+'">'+(a.label||e.getLabel(a.property))+'</label><input type="text" id="'+(a.cssId||a.property)+'" /><button>'+(a.buttonLabel||"Validate")+"</button></fieldset>");a.cssId&&d.attr("id",a.cssId);d.find("button").click(c);d.find("input").keyup(function(a){13===
a.keyCode&&c.call(this,a)});a.triggers?j.utils.array(a.triggers).forEach(function(a){b.triggers.events[a]=g}):b.triggers.properties[a.property]=g;this.html=d};k.ArrayInput=function(h,e){function c(){var d={};d[a.property]=i.find("input").val().split(",").map(function(a){return a.replace(/^ */g,"").replace(/ *$/g,"")}).filter(function(a){return!!a});f&&b.dispatchEvent(f,d)}function g(b){var c=b.get(a.property);if(d.length!==c.length||d.some(function(a,b){return a!==c[b]}))d=c,i.find("input").val(b.get(a.property).join(", "))}
j.module.call(this);var b=this,a=h||{};if(!a.property)throw Error("[ArrayInput] Property missing");var f=a.dispatch||(1===e.getEvents(a.property).length?e.getEvents(a.property)[0]:null),d=[],i=a.element||$('<fieldset><label for="'+(a.cssId||a.property)+'">'+(a.label||e.getLabel(a.property))+'</label><input type="text" id="'+(a.cssId||a.property)+'" /><button>'+(a.buttonLabel||"Validate")+"</button></fieldset>");a.cssId&&i.attr("id",a.cssId);i.find("button").click(c);i.find("input").keyup(function(a){13===
a.keyCode&&c.call(this,a)});a.triggers?j.utils.array(a.triggers).forEach(function(a){b.triggers.events[a]=g}):b.triggers.properties[a.property]=g;this.html=i};k.NumberInput=function(h,e){function c(){var c={};c[a.property]=+d.find("input").val();f&&b.dispatchEvent(f,c)}function g(b){d.find("input").val(+b.get(a.property))}j.module.call(this);var b=this,a=h||{};if(!a.property)throw Error("[NumberInput] Property missing");var f=a.dispatch||(1===e.getEvents(a.property).length?e.getEvents(a.property)[0]:
null),d=a.element||$('<fieldset><label for="'+(a.cssId||a.property)+'">'+(a.label||e.getLabel(a.property))+'</label><input type="number" id="'+(a.cssId||a.property)+'" /><button>'+(a.buttonLabel||"Validate")+"</button></fieldset>");a.cssId&&d.attr("id",a.cssId);d.find("button").click(c);d.find("input").keyup(function(a){13===a.keyCode&&c.call(this,a)});a.triggers?j.utils.array(a.triggers).forEach(function(a){b.triggers.events[a]=g}):b.triggers.properties[a.property]=g;this.html=d};k.Select=function(h,
e){function c(b){d=b.get(a.property);k.val(d)}function g(b){if("string"===typeof a.values){var c=b.get(a.values);if(i.length!==c.length||i.some(function(a,b){return a!==c[b]}))i=c,k.empty().append(i.map(function(a){return"string"===typeof a?'<option value="'+a+'">'+a+"</option>":'<option value="'+a.id+'">'+(a.label||a.id)+"</option>"})).val(d)}}j.module.call(this);var b=this,a=h||{};if(!a.property)throw Error("[Select] Property missing");var f=a.dispatch||(1===e.getEvents(a.property).length?e.getEvents(a.property)[0]:
null),d,i=[],k=a.element||$("<select></select>");a.cssClass&&k.addClass(a.cssClass);a.cssId&&k.attr("id",a.cssId);a.values&&"array"===j.struct.get(a.values)&&(i=a.values,k.append(i.map(function(a){return"string"===typeof a?'<option value="'+a+'">'+a+"</option>":'<option value="'+a.id+'">'+(a.label||a.id)+"</option>"})));k.change(function(){var c={};c[a.property]=$(this).val();f&&b.dispatchEvent(f,c)});a.triggers?j.utils.array(a.triggers).forEach(function(a){b.triggers.events[a]=update}):b.triggers.properties[a.property]=
c;"string"===typeof a.values&&(b.triggers.properties[a.values]=g);this.html=k}})(domino.modules=domino.modules||{},domino);
