<html>
<head>
  <title>domino.js test</title>
  <style type="text/css">
    div.testing > * {
      padding: 5px;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
  <script type="text/javascript" src="../src/domino.js"></script>
  <script type="text/javascript" src="../src/domino.modules.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      // Setup domino:
      domino.settings({
        verbose: true,
        strict: true
      });

      /**
       * TEST 1:
       *********
       */
      var dom1 = $('#test1'),
          d1 = new domino({
            name: 'd1',
            properties: [
              {
                name: 'flagA',
                value: false,
                type: 'boolean',
                triggers: 'updateFlagA',
                dispatch: 'flagAUpdated'
              },
              {
                name: 'flagB',
                value: false,
                type: 'boolean',
                triggers: 'updateFlagB',
                dispatch: 'flagBUpdated'
              }
            ],
            hacks: [
              {
                triggers: 'resetFlags',
                method: function() {
                  this.update({
                    flagA: false,
                    flagB: false
                  });
                }
              }
            ]
          });

      d1.addModule(domino.modules.Button, [{
        dispatch: 'resetFlags',
        htmlContent: 'Reset flags'
      }]).html.appendTo(dom1);

      d1.addModule(domino.modules.SwitchButton, [{
        htmlContentOff: 'Turn flag A on',
        htmlContentOn: 'Turn flag A off',
        triggerProperty: 'flagA',
        dispatch: 'updateFlagA'
      }]).html.appendTo(dom1);

      d1.addModule(domino.modules.SwitchButton, [{
        htmlContentOff: 'Turn flag B on',
        htmlContentOn: 'Turn flag B off',
        triggerProperty: 'flagB',
        dispatch: 'updateFlagB'
      }]).html.appendTo(dom1);

      d1.addModule(domino.modules.SwitchButton, [{
        htmlContentOff: 'Turn flag B on',
        htmlContentOn: 'Turn flag B off',
        triggerProperty: 'flagB',
        dispatch: 'updateFlagB'
      }]).html.appendTo(dom1);

      d1.addModule(domino.modules.Text, [{
        triggerProperty: 'flagA'
      }]).html.appendTo(dom1);

      d1.addModule(domino.modules.Text, [{
        triggerProperty: 'flagB'
      }]).html.appendTo(dom1);

      /**
       * TEST 1:
       *********
       */
      var dom2 = $('#test2'),
          d2 = new domino({
            name: 'd2',
            properties: [
              {
                name: 'stringA',
                value: 'a1',
                type: 'string',
                triggers: 'updateStringA',
                dispatch: 'stringAUpdated'
              },
              {
                name: 'valuesB',
                value: ['b1', 'b2', 'b3', 'b4', 'b5'],
                type: 'array',
                triggers: 'updateValuesB',
                dispatch: 'valuesBUpdated'
              },
              {
                name: 'stringB',
                value: 'b1',
                type: 'string',
                triggers: 'updateStringB',
                dispatch: 'stringBUpdated'
              }
            ]
          });

      d2.addModule(domino.modules.Select, [{
        values: ['a1', 'a2', 'a3', 'a4', 'a5'],
        triggerProperty: 'stringA',
        dispatch: 'updateStringA'
      }]).html.appendTo(dom2);

      d2.addModule(domino.modules.Select, [{
        values: 'valuesB',
        triggerProperty: 'stringB',
        dispatch: 'updateStringB'
      }]).html.appendTo(dom2);

      d2.addModule(domino.modules.Select, [{
        values: 'valuesB',
        triggerProperty: 'stringB',
        dispatch: 'updateStringB'
      }]).html.appendTo(dom2);

      d2.addModule(domino.modules.Text, [{
        triggerProperty: 'stringA'
      }]).html.appendTo(dom2);

      d2.addModule(domino.modules.Text, [{
        triggerProperty: 'stringB'
      }]).html.appendTo(dom2);
    });
  </script>
</head>
<body>
  <div class="testing" id="test1">
    <h2>Test 1: Basic flags + hack</h2>
  </div>
  <div class="testing" id="test2">
    <h2>Test 2: Multi values properties</h2>
  </div>
</body>
</html>